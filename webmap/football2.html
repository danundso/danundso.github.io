<!DOCTYPE html>
<html>
<head>
    <title>Football Teams</title>
    <link rel="icon" href="ball.png">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.3/dist/leaflet.css"
     integrity="sha256-kLaT2GOSpHechhsozzB+flnD+zUyjE2LlfWPgU04xyI="
     crossorigin=""/>
	<link rel="stylesheet" href="https://code.jquery.com/ui/1.12.0/themes/pepper-grinder/jquery-ui.css"/>
     
     <script src="https://unpkg.com/leaflet@1.9.3/dist/leaflet.js"
     integrity="sha256-WBkoXOwTeyKclOHuWtc+i2uENFpDZ9YPdf5Hf+D7ewM="
     crossorigin=""></script>
    <script src="AllFiveLeaguesTry0301.js"
     crossorigin=""></script>

	<meta charset="utf-8">
  <link rel="stylesheet" href="//code.jquery.com/ui/1.12.1/themes/smoothness/jquery-ui.css">
  <style>#slider { margin: 10px; }  </style>
  <script src="//code.jquery.com/jquery-1.12.4.js"></script>
  <script src="//code.jquery.com/ui/1.12.1/jquery-ui.js"></script>

     
     <style>
      #map {position: absolute; top: 0; bottom: 0 ; left: 0; right: 0;}
	     
	     .infobox { position: absolute;
       left:15px; width: 500px; top: 15px;
       z-index: 20; padding: 5px; border-radius: 5px;
       background-color: #ffffff; opacity: 0.7;
       }
       
	     
      </style>
    
</head>
<body>
  <div id = "map"></div>
  
  <div id="controls"></div>
	
  <div id="slider"></div>
	
	<div id="basemap-selector-container">
  <select id="basemap-selector">
    <option value="osm">Basemap</option>
    <option value="satellite">Satellite Imagery</option>
  </select>
</div>
	

	
	<div class="checkbox">
  <input type="checkbox" id="champions-league" name="champions-league">
  <label for="champions-league">Champions League</label>
</div>

		
  <script>
	  
	  var checkbox = document.getElementById("champions-league");
	
var timeslider =  $("#slider").slider({
  min: 2015,
  max: 2022,
  step: 1,
  value: 1,
  create: function() {
    // Create ticks with labels for each year
    for (var i = 2015; i <= 2022; i++) {
      var year = "S" + String(i - 2000);
      $("<span>").addClass("ui-slider-tick").css({
        "left": (i - 2015) / 7 * 100 + "%",
        "font-size": "10px",
        "padding-left": "3px",
        "padding-right": "3px"
      }).text(year).appendTo($("#slider"));
    }
  },
  slide: function(event, ui) {
    // Get the year selected by the slider
    var year = "S" + ui.value;
	  
    var championsLeagueSelected = map.hasLayer(championsLayer);

    // Loop through the GeoJSON features
   englandLayer.eachLayer(function(layer) {
    if (map.hasLayer(englandLayer)) {
    if (checkbox.checked) {
      if (layer.feature.properties[year] === 2) {
        layer.getElement().style.visibility = "visible";
      } else {
        layer.getElement().style.visibility = "hidden";
      }
    } else {
      if (layer.feature.properties[year]) {
        layer.getElement().style.visibility = "visible";
      } else {
        layer.getElement().style.visibility = "hidden";
      }
    }
  }});
   
	  spainLayer.eachLayer(function(layer) {
 if (map.hasLayer(spainLayer)) {
    if (checkbox.checked) {
      if (layer.feature.properties[year] === 2) {
        layer.getElement().style.visibility = "visible";
      } else {
        layer.getElement().style.visibility = "hidden";
      }
    } else {
      if (layer.feature.properties[year]) {
        layer.getElement().style.visibility = "visible";
      } else {
        layer.getElement().style.visibility = "hidden";
      }
    }
  }});
	  
	  germanyLayer.eachLayer(function(layer) {
   if (map.hasLayer(germanyLayer)) {
    if (checkbox.checked) {
      if (layer.feature.properties[year] === 2) {
        layer.getElement().style.visibility = "visible";
      } else {
        layer.getElement().style.visibility = "hidden";
      }
    } else {
      if (layer.feature.properties[year]) {
        layer.getElement().style.visibility = "visible";
      } else {
        layer.getElement().style.visibility = "hidden";
      }
    }
  }});
	  
	  franceLayer.eachLayer(function(layer) {
   if (map.hasLayer(franceLayer)) {
    if (checkbox.checked) {
      if (layer.feature.properties[year] === 2) {
        layer.getElement().style.visibility = "visible";
      } else {
        layer.getElement().style.visibility = "hidden";
      }
    } else {
      if (layer.feature.properties[year]) {
        layer.getElement().style.visibility = "visible";
      } else {
        layer.getElement().style.visibility = "hidden";
      }
    }
  }});
	  
	  italyLayer.eachLayer(function(layer) {
 if (map.hasLayer(italyLayer)) {
    if (checkbox.checked) {
      if (layer.feature.properties[year] === 2) {
        layer.getElement().style.visibility = "visible";
      } else {
        layer.getElement().style.visibility = "hidden";
      }
    } else {
      if (layer.feature.properties[year]) {
        layer.getElement().style.visibility = "visible";
      } else {
        layer.getElement().style.visibility = "hidden";
      }
    }
  }});
	
	  
  }
});




    
   var map = L.map('map').setView([45, 3], 5);
    
var openStreetMapLayer = L.tileLayer('https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}{r}.png', {
    maxZoom: 19,
    minZoom: 3,
    attribution: '&copy; <a href="https://carto.com/attributions">CARTO</a>'
}).addTo(map);


var satelliteLayer = L.tileLayer('https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}', {
    maxZoom: 19,
    attribution: 'Esri &mdash; Source: Esri, i-cubed, USDA, USGS, AEX, GeoEye, Getmapping, Aerogrid, IGN, IGP, UPR-EGP, and the GIS User Community'
});

var basemapSelector = document.getElementById('basemap-selector');

basemapSelector.addEventListener('change', function() {
    var selectedBasemap = this.value;
    switch(selectedBasemap) {
        case 'osm':
            map.removeLayer(satelliteLayer);
            openStreetMapLayer.addTo(map);
            break;
        case 'satellite':
            map.removeLayer(openStreetMapLayer);
            satelliteLayer.addTo(map);
            break;
    }
});

    
var geojsonFeature = {
    "type": "Feature",
    "properties": {
        "icon": "ball.png"
    },
    "geometry": {
        "type": "Point",
        "coordinates": [0, 0]
    }
};

var spainLayer = L.geoJSON(teams, {
  filter: function(feature) {
    return feature.properties.Country === "Spain" || feature.properties.Country === "Spain ";
  },
  pointToLayer: function(feature, latlng) {
    var marker = L.marker(latlng, {
      icon: L.icon({
        iconUrl: feature.properties.icon || "ball.png",
        iconSize: [25],
        iconAnchor: [12, 12]
      })
    });

    marker.bindPopup("Team: " + feature.properties.Team + "<br>" +
                      "Country: " + feature.properties.Country,
                                {className: 'custom-popup'});

    map.on('zoomend', function() {
      if (map.getZoom() >= 11) {
        marker.setIcon(L.icon({
          iconUrl: feature.properties.icon || "ball.png",
          iconSize: [55],
          iconAnchor: [27, 27]
        }));
      } else {
        marker.setIcon(L.icon({
          iconUrl: feature.properties.icon || "ball.png",
          iconSize: [25],
          iconAnchor: [12, 12]
        }));
      }
    });

    return marker;
  }
}).addTo(map);


var italyLayer = L.geoJSON(teams, {
  filter: function(feature) {
    return feature.properties.Country === "Italy ";
  },
  pointToLayer: function(feature, latlng) {
    var marker = L.marker(latlng, {
      icon: L.icon({
        iconUrl: feature.properties.icon || "ball.png",
        iconSize: [25],
        iconAnchor: [12, 12]
      })
    });

    marker.bindPopup("Team: " + feature.properties.Team + "<br>" +
                      "Country: " + feature.properties.Country,
                          {className: 'custom-popup'});
	  
	   map.on('zoomend', function() {
      if (map.getZoom() >= 11) {
        marker.setIcon(L.icon({
          iconUrl: feature.properties.icon || "ball.png",
          iconSize: [55],
          iconAnchor: [27, 27]
        }));
      } else {
        marker.setIcon(L.icon({
          iconUrl: feature.properties.icon || "ball.png",
          iconSize: [25],
          iconAnchor: [12, 12]
        }));
      }
    });

    return marker;
  }
}).addTo(map);

var englandLayer = L.geoJSON(teams, {
  filter: function(feature) {
    return feature.properties.Country === "England";
  },
  pointToLayer: function(feature, latlng) {
    var marker = L.marker(latlng, {
      icon: L.icon({
        iconUrl: feature.properties.icon || "ball.png",
        iconSize: [25],
        iconAnchor: [14, 14]
      })
    });

    marker.bindPopup("Team: " + feature.properties.Team + "<br>" +
                      "Country: " + feature.properties.Country,
                         {className: 'custom-popup'});
	  
	   map.on('zoomend', function() {
      if (map.getZoom() >= 11) {
        marker.setIcon(L.icon({
          iconUrl: feature.properties.icon || "ball.png",
          iconSize: [55],
          iconAnchor: [27, 27]
        }));
      } else {
        marker.setIcon(L.icon({
          iconUrl: feature.properties.icon || "ball.png",
          iconSize: [25],
          iconAnchor: [12, 12]
        }));
      }
    });

    return marker;
  }
}).addTo(map);

var franceLayer = L.geoJSON(teams, {
  filter: function(feature) {
    return feature.properties.Country === "France";
  },
  pointToLayer: function(feature, latlng) {
    var marker = L.marker(latlng, {
      icon: L.icon({
        iconUrl: feature.properties.icon || "ball.png",
        iconSize: [25],
        iconAnchor: [12, 12]
      })
    });

    marker.bindPopup("Team: " + feature.properties.Team + "<br>" +
                      "Country: " + feature.properties.Country,
                         {className: 'custom-popup'});
	  
	   map.on('zoomend', function() {
      if (map.getZoom() >= 11) {
        marker.setIcon(L.icon({
          iconUrl: feature.properties.icon || "ball.png",
          iconSize: [55],
          iconAnchor: [27, 27]
        }));
      } else {
        marker.setIcon(L.icon({
          iconUrl: feature.properties.icon || "ball.png",
          iconSize: [25],
          iconAnchor: [12, 12]
        }));
      }
    });

    return marker;
      }
    }).addTo(map);


var germanyLayer = L.geoJSON(teams, {
  filter: function(feature) {
    return feature.properties.Country === "Germany";
  },
  pointToLayer: function(feature, latlng) {
    var marker = L.marker(latlng, {
      icon: L.icon({
        iconUrl: feature.properties.icon || "ball.png",
        iconSize: [25],
        iconAnchor: [12, 12]
      })
    });

    marker.bindPopup("Team: " + feature.properties.Team + "<br>" +
                      "Country: " + feature.properties.Country,
                         {className: 'custom-popup'});
	  
	   map.on('zoomend', function() {
      if (map.getZoom() >= 11) {
        marker.setIcon(L.icon({
          iconUrl: feature.properties.icon || "ball.png",
          iconSize: [55],
          iconAnchor: [27, 27]
        }));
      } else {
        marker.setIcon(L.icon({
          iconUrl: feature.properties.icon || "ball.png",
          iconSize: [25],
          iconAnchor: [12, 12]
        }));
      }
    });

    return marker;
      }
    }).addTo(map);


	  
	  
var championsLayer = L.geoJSON(teams, {
  filter: function(feature) {
    return feature.properties.Attribute === 2;
  },
  pointToLayer: function(feature, latlng) {
    var marker = L.marker(latlng, {
      icon: L.icon({
        iconUrl: feature.properties.icon || "ball.png",
        iconSize: [25],
        iconAnchor: [12, 12]
      })
    });

    marker.bindPopup("Team: " + feature.properties.Team + "<br>" +
                      "Country: " + feature.properties.Country,
                          {className: 'custom-popup'});
    return marker;
  }
});
	  function filterTeamsByYear(year) {
  championsLayer.clearLayers(); // Remove all markers from the champions layer
  championsLayer.addData(teams.filter(function(feature) {
    return feature.properties.Attribute === 2 && feature.properties.Year === year;
  }));
}
	  
	  
	  var year3 = "S" + timeslider.slider("value")
	  
	  if (map.hasLayer(championsLayer)) {
        germanyLayer.eachLayer(function(layer) {
      if (layer.feature.properties[year3] === 2) {
        layer.addTo(map);
      } else {
        map.removeLayer(layer);
      }
    });
	  }
		  
	  
	  
      
//  var group = L.layerGroup([spainLayer, italyLayer, englandLayer, franceLayer, germanyLayer, championsLayer]);
      
 //     var baseLayers = {
// "All Teams": group
// };

var overlayLayers = {
// "Champions League": championsLayer,
 "Spain": spainLayer,
 "Italy": italyLayer,
 "England": englandLayer,
 "France": franceLayer,
 "Germany": germanyLayer
 };

// var layerControl = L.control.layers(baseLayers, overlayLayers, {collapsed: false});
 var layerControl = L.control.layers(null, overlayLayers, {collapsed: false});

layerControl.addTo(map);

layerControl.getContainer().style.zIndex = 9999;
    
    
	 
	  
	 

checkbox.addEventListener("change", function() {
  var year3 = "S" + timeslider.slider("value");
  if (checkbox.checked) {
    germanyLayer.eachLayer(function(layer) {
      if (layer.feature.properties[year3] === 2) {
        layer.getElement().style.visibility = "visible";
      } else {
        layer.getElement().style.visibility = "hidden";
      }
    });
  } else {
    germanyLayer.eachLayer(function(layer) {
      if (layer.feature.properties[year3]) {
        layer.getElement().style.visibility = "visible";
      }
    });
  }
});
	  
	  checkbox.addEventListener("change", function() {
  var year3 = "S" + timeslider.slider("value");
  if (checkbox.checked) {
    englandLayer.eachLayer(function(layer) {
      if (layer.feature.properties[year3] === 2) {
        layer.getElement().style.visibility = "visible";
      } else {
        layer.getElement().style.visibility = "hidden";
      }
    });
  } else {
    englandLayer.eachLayer(function(layer) {
      if (layer.feature.properties[year3]) {
        layer.getElement().style.visibility = "visible";
      }
    });
  }
});
	  
	  
	  checkbox.addEventListener("change", function() {
  var year3 = "S" + timeslider.slider("value");
  if (checkbox.checked) {
    spainLayer.eachLayer(function(layer) {
      if (layer.feature.properties[year3] === 2) {
        layer.getElement().style.visibility = "visible";
      } else {
        layer.getElement().style.visibility = "hidden";
      }
    });
  } else {
    spainLayer.eachLayer(function(layer) {
      if (layer.feature.properties[year3]) {
        layer.getElement().style.visibility = "visible";
      }
    });
  }
});
	  
	  
	  checkbox.addEventListener("change", function() {
  var year3 = "S" + timeslider.slider("value");
  if (checkbox.checked) {
    italyLayer.eachLayer(function(layer) {
      if (layer.feature.properties[year3] === 2) {
        layer.getElement().style.visibility = "visible";
      } else {
        layer.getElement().style.visibility = "hidden";
      }
    });
  } else {
    italyLayer.eachLayer(function(layer) {
      if (layer.feature.properties[year3]) {
        layer.getElement().style.visibility = "visible";
      }
    });
  }
});
	  
	  
	  checkbox.addEventListener("change", function() {
  var year3 = "S" + timeslider.slider("value");
  if (checkbox.checked) {
    franceLayer.eachLayer(function(layer) {
      if (layer.feature.properties[year3] === 2) {
        layer.getElement().style.visibility = "visible";
      } else {
        layer.getElement().style.visibility = "hidden";
      }
    });
  } else {
    franceLayer.eachLayer(function(layer) {
      if (layer.feature.properties[year3]) {
        layer.getElement().style.visibility = "visible";
      }
    });
  }
});


      
  </script>
	

    
    <style>
      .custom-popup .leaflet-popup-content-wrapper {
  background-color: #e6e6fa; /* light purple */
  font-size: 16px; /* larger font size */
}

.custom-popup .leaflet-popup-tip {
  background-color: #e6e6fa; /* light purple */
}

.custom-popup .leaflet-popup-content {
  margin: 10px 10px 10px 10px; /* increase padding */
}
        
   /*  .leaflet-control-layers {
  position: absolute;
  top: 10px;
  right: 10px;
  background-color: #d8bfd8;
  border: 2px solid #fff;
  border-radius: 5px;
  padding: 5px;
  font-family: "Lucida Sans", sans-serif;
  font-size: 14px;
  
} */
	    
#slider-container {
  width: 220px;
  height: 30px;
  position: fixed;
  right: 10px;
  top: 300px;
  transform: translateY(-50%);
  border: 1px solid #ccc;
  background-color: white;
  padding: 5px;
  border-radius: 5px;
  box-shadow: 0px 0px 5px #ccc;
}

#slider {
  z-index: 9999;
  width: 200px;
  height: 10px;
  position: fixed;
  right: 10px;
  top: 260px;
  transform: translateY(-50%);
}
	   
 .champions-popup {
  font-size: 16px;
  padding: 10px;
  width: 200px;
}
	    
#basemap-selector-container {
  position: absolute;
  top: 200px;
  right: 10px;
  z-index: 9990;
  background-color: #fff;
  padding: 10px;
  border-radius: 5px;
  box-shadow: 0 0 10px rgba(0, 0, 0, 0.2);
}

#basemap-selector {
  width: 150px;
  font-size: 14px;
}
	    
	    #controls {
			position: absolute;
			top: 0px;
			right: 0px;
			height: 300px;
			width: 240px;
			background-color: #FCF6F5;
			opacity: 0.85;
			z-index: 500;
			padding: 10px;
		}
	    
	    #map-container {
  position: relative;
}

#champions-league-checkbox {
  position: absolute;
  top: 150px;
  right: 10px;
	z-index: 9900;
}

.checkbox {
  position: fixed;
  top: 150px;
  right: 10px;
  z-index: 9992;
}



	    
    </style>
    
  </body>
</html>
